<!DOCTYPE html>


<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<meta name="viewport" content="width=device-width">
		<title>The Concierge</title>
	</head>
	<body class="container">


	<div id="index list" class="jumbotron">
		<h1 id="heading">Home Page</h1>
		<p>Welcome to the home pgae of my shit little test app.</p>
	</div>

	<ul id="sidebar" class="col-sm-3 col-md-3 col-lg-2 well">
	</ul>


	<!-- 
==============================================================
==============================================================
=============   using scope query for elgapp   ===============
========ElgHasScoringController.php         ============================
==============================================================
	 -->

<?php
//controller file
class ElgHasScoringController
{
	public function getIndex()
	{
		$scorableModels = $this->getElgAppModels();
		view()->share('operations', static::ops());
		return view($this->getViewName('index'))
			->with('models', $scorableModels);
	}
	/*
	This function calls the method in the repofile that queries 
	the elgApp model using scope.
	*/
	protected function getElgAppModels()
	{
		$this->getProvider()->getScorableApps();
	}
}



?>

<!-- 
==========================================================================================================================
=============================================================
=============================================================
=============================================================
 -->
<!-- 
=============================================================
=============================================================
=============   using scope query for elgapp  ===============
========ElgHasScoring.php        ============================
=============================================================
-->
<?php
	//ElgHasScoring repo file

	// use elgapp model
	use ElgApp

	class ElgHasScoring
	{
		public function getScorableApps();
		{
			return ElgApp::getScorableApps()
				->orderBy('id')
				->get();
		}
	}
?>
<!-- 
=============================================================
=============================================================
=============================================================
=============================================================
=============================================================
 -->
<!--
=============================================================
=============================================================
=============   using scope query for elgapp  ===============
========ElgApp.php         ===================      =========
=============================================================
-->
<?php
	//elgapp model

	class ElgApp
	{
		//Scope method for getting elgApps ready for scoring
		public function scopreGetScorableApps($query);
		{
			//using normal where statements
			return $query->where('submitted', '!=', null)
				->where('reviewed', '=', null)
				->get();
			//Second try at for getting the scorable elgApps
			return $query->whereNotNull('submitted')
				->whereNull('reviewed')
				->get();
		}
		
	}
?>
<!-- 
=============================================================
=============================================================
=============================================================
=============================================================
============================================================= -->

	</body>
	<footer>
		<link rel="stylesheet" type="text/css" href="css/mine/style.css">
		<script type="text/javascript" src="js/mine/mine.js"></script>
	</footer>
</html>
